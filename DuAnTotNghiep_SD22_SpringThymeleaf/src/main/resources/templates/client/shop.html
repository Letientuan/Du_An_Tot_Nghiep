<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<link rel="icon" type="image/svg+xml"
      href="https://bizweb.dktcdn.net/100/048/601/themes/734017/assets/index-cate-icon-4.png?1610907247309"/>
<div th:replace="~{client/fragmentsClient/head :: head}"></div>
<head>
    <title>ShoeSee- Shoes Online Store</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="author" content="TemplatesJungle">
    <meta name="keywords" content="Online Store">
    <meta name="description" content="Stylish - Shoes Online Store HTML Template">

    <link rel="stylesheet" th:href="@{/assets/css/vendor.css}">
    <link rel="stylesheet" th:href="@{/assets/css/style.css}"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/chocolat@0.7.0/dist/css/chocolat.css">

    <style>
        /* Ensure the size items are displayed in a row with wrapping */
        #sizeContainer {
            display: flex;
            flex-wrap: wrap;
        }

        .size-item {
            margin: 5px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            text-align: center;
            background-color: #f8f9fa;
            cursor: pointer;
            transition: background-color 0.3s, color 0.3s;
        }

        .size-item:hover {
            background-color: #e9ecef;
        }

        .size-item.selected {
            background-color: #007bff;
            color: white;
            border-color: #007bff;
        }

    </style>
    <style>
        .card-title {
            text-decoration: none;
            color: black;
        }
        a {
            text-decoration: none; /* Loại bỏ gạch chân cho tất cả các liên kết */
        }
        .bold-red {
            color: red;
            font-weight: bold;
        }
    </style>
    <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,900;1,900&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"
            rel="stylesheet">
</head>

<body>
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
    <symbol xmlns="http://www.w3.org/2000/svg" id="shopping-carriage" viewBox="0 0 24 24" fill="none">
        <path
                d="M5 22H19C20.103 22 21 21.103 21 20V9C21 8.73478 20.8946 8.48043 20.7071 8.29289C20.5196 8.10536 20.2652 8 20 8H17V7C17 4.243 14.757 2 12 2C9.243 2 7 4.243 7 7V8H4C3.73478 8 3.48043 8.10536 3.29289 8.29289C3.10536 8.48043 3 8.73478 3 9V20C3 21.103 3.897 22 5 22ZM9 7C9 5.346 10.346 4 12 4C13.654 4 15 5.346 15 7V8H9V7ZM5 10H7V12H9V10H15V12H17V10H19L19.002 20H5V10Z"
                fill="black"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="quick-view" viewBox="0 0 24 24">
        <path fill="currentColor"
              d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396l1.414-1.414l-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8s3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6s-6-2.691-6-6s2.691-6 6-6z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="shopping-cart" viewBox="0 0 24 24" fill="none">
        <path
                d="M21 4H2V6H4.3L7.582 15.025C7.79362 15.6029 8.1773 16.1021 8.68134 16.4552C9.18539 16.8083 9.78556 16.9985 10.401 17H19V15H10.401C9.982 15 9.604 14.735 9.461 14.342L8.973 13H18.246C19.136 13 19.926 12.402 20.169 11.549L21.962 5.275C22.0039 5.12615 22.0109 4.96962 21.9823 4.81763C21.9537 4.66565 21.8904 4.52234 21.7973 4.39889C21.7041 4.27544 21.5837 4.1752 21.4454 4.106C21.3071 4.0368 21.1546 4.00053 21 4ZM18.246 11H8.246L6.428 6H19.675L18.246 11Z"
                fill="black"/>
        <path
                d="M10.5 21C11.3284 21 12 20.3284 12 19.5C12 18.6716 11.3284 18 10.5 18C9.67157 18 9 18.6716 9 19.5C9 20.3284 9.67157 21 10.5 21Z"
                fill="black"/>
        <path
                d="M16.5 21C17.3284 21 18 20.3284 18 19.5C18 18.6716 17.3284 18 16.5 18C15.6716 18 15 18.6716 15 19.5C15 20.3284 15.6716 21 16.5 21Z"
                fill="black"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="nav-icon" viewBox="0 0 16 16">
        <path
                d="M14 10.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 .5-.5zm0-3a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0 0 1h7a.5.5 0 0 0 .5-.5zm0-3a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0 0 1h11a.5.5 0 0 0 .5-.5z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="close" viewBox="0 0 16 16">
        <path
                d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="navbar-icon" viewBox="0 0 16 16">
        <path
                d="M14 10.5a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0 0 1h3a.5.5 0 0 0 .5-.5zm0-3a.5.5 0 0 0-.5-.5h-7a.5.5 0 0 0 0 1h7a.5.5 0 0 0 .5-.5zm0-3a.5.5 0 0 0-.5-.5h-11a.5.5 0 0 0 0 1h11a.5.5 0 0 0 .5-.5z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="plus" viewBox="0 0 24 24">
        <path fill="currentColor" d="M19 12.998h-6v6h-2v-6H5v-2h6v-6h2v6h6z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="minus" viewBox="0 0 24 24">
        <path fill="currentColor" d="M19 12.998H5v-2h14z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="dropdown" viewBox="0 0 24 24">
        <path fill="currentColor" d="m7 10l5 5l5-5H7Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="user" viewBox="0 0 24 24">
        <path fill="currentColor"
              d="M12 2a5 5 0 1 0 5 5a5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3a3 3 0 0 1-3 3zm9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="arrow-right" viewBox="0 0 24 24">
        <path fill="currentColor"
              d="M13.3 17.275q-.3-.3-.288-.725t.313-.725L16.15 13H5q-.425 0-.713-.288T4 12q0-.425.288-.713T5 11h11.15L13.3 8.15q-.3-.3-.3-.713t.3-.712q.3-.3.713-.3t.712.3L19.3 11.3q.15.15.213.325t.062.375q0 .2-.063.375t-.212.325l-4.6 4.6q-.275.275-.687.275t-.713-.3Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="facebook" viewBox="0 0 24 24">
        <path fill="currentColor"
              d="M9.198 21.5h4v-8.01h3.604l.396-3.98h-4V7.5a1 1 0 0 1 1-1h3v-4h-3a5 5 0 0 0-5 5v2.01h-2l-.396 3.98h2.396v8.01Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="twitter" viewBox="0 0 512 512">
        <path fill="currentColor"
              d="M496 109.5a201.8 201.8 0 0 1-56.55 15.3a97.51 97.51 0 0 0 43.33-53.6a197.74 197.74 0 0 1-62.56 23.5A99.14 99.14 0 0 0 348.31 64c-54.42 0-98.46 43.4-98.46 96.9a93.21 93.21 0 0 0 2.54 22.1a280.7 280.7 0 0 1-203-101.3A95.69 95.69 0 0 0 36 130.4c0 33.6 17.53 63.3 44 80.7A97.5 97.5 0 0 1 35.22 199v1.2c0 47 34 86.1 79 95a100.76 100.76 0 0 1-25.94 3.4a94.38 94.38 0 0 1-18.51-1.8c12.51 38.5 48.92 66.5 92.05 67.3A199.59 199.59 0 0 1 39.5 405.6a203 203 0 0 1-23.5-1.4A278.68 278.68 0 0 0 166.74 448c181.36 0 280.44-147.7 280.44-275.8c0-4.2-.11-8.4-.31-12.5A198.48 198.48 0 0 0 496 109.5Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="youtube" viewBox="0 0 32 32">
        <path fill="currentColor"
              d="M29.41 9.26a3.5 3.5 0 0 0-2.47-2.47C24.76 6.2 16 6.2 16 6.2s-8.76 0-10.94.59a3.5 3.5 0 0 0-2.47 2.47A36.13 36.13 0 0 0 2 16a36.13 36.13 0 0 0 .59 6.74a3.5 3.5 0 0 0 2.47 2.47c2.18.59 10.94.59 10.94.59s8.76 0 10.94-.59a3.5 3.5 0 0 0 2.47-2.47A36.13 36.13 0 0 0 30 16a36.13 36.13 0 0 0-.59-6.74ZM13.2 20.2v-8.4l7.27 4.2Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="instagram" viewBox="0 0 256 256">
        <path fill="currentColor"
              d="M128 80a48 48 0 1 0 48 48a48.05 48.05 0 0 0-48-48Zm0 80a32 32 0 1 1 32-32a32 32 0 0 1-32 32Zm48-136H80a56.06 56.06 0 0 0-56 56v96a56.06 56.06 0 0 0 56 56h96a56.06 56.06 0 0 0 56-56V80a56.06 56.06 0 0 0-56-56Zm40 152a40 40 0 0 1-40 40H80a40 40 0 0 1-40-40V80a40 40 0 0 1 40-40h96a40 40 0 0 1 40 40ZM192 76a12 12 0 1 1-12-12a12 12 0 0 1 12 12Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="pinterest" viewBox="0 0 24 24">
        <path fill="currentColor"
              d="M9.04 21.54c.96.29 1.93.46 2.96.46a10 10 0 0 0 10-10A10 10 0 0 0 12 2A10 10 0 0 0 2 12c0 4.25 2.67 7.9 6.44 9.34c-.09-.78-.18-2.07 0-2.96l1.15-4.94s-.29-.58-.29-1.5c0-1.38.86-2.41 1.84-2.41c.86 0 1.26.63 1.26 1.44c0 .86-.57 2.09-.86 3.27c-.17.98.52 1.84 1.52 1.84c1.78 0 3.16-1.9 3.16-4.58c0-2.4-1.72-4.04-4.19-4.04c-2.82 0-4.48 2.1-4.48 4.31c0 .86.28 1.73.74 2.3c.09.06.09.14.06.29l-.29 1.09c0 .17-.11.23-.28.11c-1.28-.56-2.02-2.38-2.02-3.85c0-3.16 2.24-6.03 6.56-6.03c3.44 0 6.12 2.47 6.12 5.75c0 3.44-2.13 6.2-5.18 6.2c-.97 0-1.92-.52-2.26-1.13l-.67 2.37c-.23.86-.86 2.01-1.29 2.7v-.03Z"/>
    </symbol>
    <symbol xmlns="http://www.w3.org/2000/svg" id="search" viewBox="0 0 24 24">
        <path fill="currentColor"
              d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396l1.414-1.414l-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8s3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6s-6-2.691-6-6s2.691-6 6-6z"/>
    </symbol>
</svg>
<!-- Loader 4 -->

<div class="preloader"
     style="position: fixed;top:0;left:0;width: 100%;height: 100%;background-color: #fff;display: flex;align-items: center;justify-content: center;z-index: 9999;">
    <svg version="1.1" id="L4" width="100" height="100" xmlns="http://www.w3.org/2000/svg"
         xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
         viewBox="0 0 50 100" enable-background="new 0 0 0 0" xml:space="preserve">
    <circle fill="#111" stroke="none" cx="6" cy="50" r="6">
      <animate
              attributeName="opacity"
              dur="1s"
              values="0;1;0"
              repeatCount="indefinite"
              begin="0.1"/>
    </circle>
        <circle fill="#111" stroke="none" cx="26" cy="50" r="6">
      <animate
              attributeName="opacity"
              dur="1s"
              values="0;1;0"
              repeatCount="indefinite"
              begin="0.2"/>
    </circle>
        <circle fill="#111" stroke="none" cx="46" cy="50" r="6">
      <animate
              attributeName="opacity"
              dur="1s"
              values="0;1;0"
              repeatCount="indefinite"
              begin="0.3"/>
    </circle>
    </svg>
</div>


<div th:replace="~{client/fragmentsClient/header :: header}"></div>

<section id="intro" class="position-relative mt-4">
    <div class="container-lg">
        <div class="swiper main-swiper">

        </div>
        <div class="swiper-pagination"></div>
    </div>
</section>
<section class="shop_section layout_padding">
    <div class="container">
        <div class="heading_container heading_center" style="margin-bottom: 30px;">
            <h4 class="section-title text-uppercase" style="text-align: center; margin-bottom: 10px;">Tất Cả Sản Phẩm</h4>
            <div class="flex justify-center mt-3" style="display: flex; justify-content: center;">
                <div class="w-48 h-0.5 bg-orange-500" style="width: 150px; height: 3px; background-color: #FF8C00; margin: 0 auto;"></div>
            </div>
        </div>
        <div class="row">
            <!-- Thymeleaf loop for products -->
            <div th:each="sanPham : ${sanPhams}" class="col-md-3 mb-3 text-center">
                <div class="card-body" style="border: 1px solid black; padding: 15px; border-radius: 8px;">
                    <!-- Modal trigger -->
                    <a href="#" data-bs-toggle="modal" data-bs-target="#productModal" th:data-id="${sanPham.id}">
                        <img th:src="'https://res.cloudinary.com/deapopcoc/image/upload/' + ${sanPham.anh}" alt="Ảnh" style="width: 275px; height: 275px; object-fit: cover;">
                        <h6 class="card-title" th:text="${sanPham.ten}"></h6>
                    </a>
                    <p class="product-price card-text bold-red" th:text="${sanPham.giaBan}"></p>
                </div>
            </div>
        </div>
        <div class="btn-box">
            <a href="#">
                View All Products
            </a>
        </div>
    </div>
</section>
<div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="productModalLabel"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <div class="container">
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <a>
                                    <img id="modalImage" class="img-fluid mb-2" alt="Product Image">
                                </a>
                            </div>
                        </div>
                        <div class="col-md-6 mb-4">
                            <div class="card">
                                <div class="card-body">
                                    <!-- Tên sản phẩm -->
<!--                                    <h5 class="card-title" id="modalProductName">Tên sản phẩm</h5>-->

                                    <!-- Giá sản phẩm -->
                                    <p class="card-text" style="color: red" id="modalPrice">Giá sản phẩm</p>

                                    <!-- Số lượng sản phẩm -->
                                    <p class="card-text" id="modalQuantity">Số lượng sản phẩm</p>

                                    <!-- Mô tả sản phẩm -->
                                    <p class="card-text" id="modalDescription">Mô tả sản phẩm</p>

                                    <!-- Màu sắc sản phẩm -->
                                    <p class="card-text" id="modalColor">
                                        <!-- Màu sắc sẽ được chèn vào đây -->
                                    </p>

                                    <!-- Kích thước sản phẩm -->
                                    <div id="modalSize" class="mb-3">
                                        <!-- Kích thước sẽ được chèn vào đây -->
                                    </div>

                                    <!-- Các nút hành động -->
                                    <div class="d-flex justify-content-between align-items-center">
                                        <a id="modalBuyLink" class="btn btn-primary" href="#">Mua Ngay</a>
                                        <a id="modalAddToCartLink" class="btn btn-secondary" href="#">Thêm Vào Giỏ Hàng</a>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- JavaScript -->


<footer id="footer" class="py-5 border-top">
    <div class="container-lg">
        <div class="row">
            <div class="col-lg-2 pb-3">
                <div class="footer-menu">
                    <h5 class="widget-title pb-2">Info</h5>
                    <ul class="menu-list list-unstyled">
                        <li class="pb-2">
                            <a href="#">Track Your Order</a>
                        </li>
                        <li class="pb-2">
                            <a href="blog.html">Our Blog</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Privacy policy</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Shipping</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Contact Us</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Help</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Community</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 pb-3">
                <div class="footer-menu">
                    <h5 class="widget-title pb-2">About</h5>
                    <ul class="menu-list list-unstyled">
                        <li class="pb-2">
                            <a href="#">History</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Our Team</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Services</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Company</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Manufacture</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Wholesale</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Retail</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 pb-3">
                <div class="footer-menu">
                    <h5 class="widget-title pb-2">Women Shoes</h5>
                    <ul class="menu-list list-unstyled">
                        <li class="pb-2">
                            <a href="#">Track Your Order</a>
                        </li>
                        <li class="pb-2">
                            <a href="blog.html">Our Blog</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Privacy policy</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Shipping</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Contact Us</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Help</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Community</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 pb-3">
                <div class="footer-menu">
                    <h5 class="widget-title pb-2">Popular</h5>
                    <ul class="menu-list list-unstyled">
                        <li class="pb-2">
                            <a href="#">Prices Drop</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">New Products</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Best Sales</a>
                        </li>
                        <li class="pb-2">
                            <a href="shop.html">Stores</a>
                        </li>
                        <li class="pb-2">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#modallogin">Login</a>
                        </li>
                        <li class="pb-2">
                            <a href="#" data-bs-toggle="modal" data-bs-target="#modallong">Cart</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 pb-3">
                <div class="footer-menu">
                    <h5 class="widget-title pb-2">Mens Collection</h5>
                    <ul class="menu-list list-unstyled">
                        <li class="pb-2">
                            <a href="#">Delivery</a>
                        </li>
                        <li class="pb-2">
                            <a href="about-us.html">About Us</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Shoes</a>
                        </li>
                        <li class="pb-2">
                            <a href="#">Contact Us</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-lg-2 pb-3">
                <div class="footer-menu">
                    <h5 class="widget-title pb-3">Get In Touch</h5>
                    <div class="footer-contact-text">
                        <span>Stylish Online Store 123 Main Street, Toulouse - France. </span>
                        <span> Call us: (+33) 800 456 789-987 </span>
                        <span class="text-hover fw-bold light-border"><a href="mailto:contact@yourwebsite.com">contact@yourwebsite.com</a></span>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <p>© Copyright Stylish 2023.</p>
            </div>
            <div class="col-md-6 text-lg-end">
                <p>Free HTML by <a href="https://templatesjungle.com/" target="_blank">TemplatesJungle</a></p>
            </div>
        </div>
    </div>
</footer>
<!-- Thêm thư viện jarallax -->
<script src="https://cdn.jsdelivr.net/npm/jarallax@1.12.0/dist/jarallax.min.js"></script>
<!-- Thêm thư viện jarallax-video (nếu cần) -->
<script src="https://cdn.jsdelivr.net/npm/jarallax@1.12.0/dist/jarallax-video.min.js"></script>
<!-- Thêm JavaScript của Chocolat -->
<script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>

<!-- Nạp JavaScript của Chocolat -->
<script th:src="@{/assets/js/jquery-1.11.0.min.js}"></script>


<script th:src="@{/assets/js/plugins.js}"></script>
<script th:src="@{/assets/js/client.js}"></script>
<script th:src="@{/assets/js/script.js}"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function () {
        $('[data-bs-toggle="modal"]').click(function () {
            var productId = $(this).attr('data-id');
            var productName = $(this).find('.card-title').text();

            // AJAX request to fetch product details
            $.ajax({
                url: '/sanphamchitietclien/' + productId,
                method: 'GET',
                dataType: 'json',
                success: function (data) {
                    $('#productModalLabel').text(productName);
                    // $('#modalImage').attr('src', '/assets/imageNV/' + data.anh);
                    $('#modalImage').attr('src', 'https://res.cloudinary.com/deapopcoc/image/upload/' + data.anh);
                    $('#modalPrice').text( data.giaBan +' VND');
                    $('#modalQuantity').text( data.soLuong);
                    $('#modalDescription').text(data.moTa);
                    $('#modalColor').html(`
    <div class="color-container rounded-lg" style="background-color: ${data.mauSac.ten}; width: 50px; height: 20px;"></div>
`);
                    $.ajax({
                        url: '/sanphamchitietclienkc/' + data.sanPham.id,
                        method: 'GET',
                        dataType: 'json',
                        success: function (additionalData) {
                            var sizeHtml = '<h6>Kích cỡ:</h6><div id="sizeContainer" class="d-flex flex-wrap">';

                            additionalData.forEach(function (item) {
                                sizeHtml += '<div class="size-item" data-id="' + item + '">' + item + '</div>';
                            });

                            sizeHtml += '</div>';
                            $('#modalSize').html(sizeHtml);


                            $('.size-item').click(function () {
                                $('.size-item').removeClass('selected');
                                $(this).addClass('selected');
                                var selectedSizeId = $(this).data('id');
                                console.log('Selected size ID:', selectedSizeId);
                            });

                            $('#modalBuyLink').attr('href', '/gio-hang/' + productId);
                            $('#modalAddToCartLink').attr('href', '/cart/add/' + productId);

                            $('#productModal').modal('show');
                        },
                        error: function () {
                            console.log('Error loading additional product details.');
                        }
                    });
                },
                error: function () {
                    console.log('Error loading product details.');
                }
            });
        });

        function getKhachHang() {
            $.ajax({
                url: '/api/session/user',
                method: 'GET',
                success: function (response) {
                    let idKhachHang = response.id;
                    getIdGioHang(idKhachHang);
                },
                error: function () {
                    console.log('Error retrieving user session.');
                }
            });
        }

        function getIdGioHang(idKhachHang) {
            $.ajax({
                url: `/api/khach-hang/thong-tin-hoa-don/${idKhachHang}`,
                method: 'GET',
                success: function (response) {
                    // Đăng ký sự kiện click cho các nút "Thêm Vào Giỏ Hàng"
                    $("#dsSanPham").on('click', '.themSanPham', function () {
                        const itemId = $(this).data('id');

                        $.ajax({
                            url: `/api/gio-hang/them-san-pham/${itemId}`,
                            method: 'POST',
                            contentType: 'application/json',
                            data: JSON.stringify({
                                gioHang: {id: response.id},
                                sanPhamChiTiet: {id: itemId}
                            }),
                            success: function () {
                                alert('Sản phẩm đã được thêm vào giỏ hàng.');
                            },
                            error: function () {
                                console.log('Error adding product to cart.');
                            }
                        });
                    });
                },
                error: function () {
                    console.log('Error retrieving cart information.');
                }
            });
        }

        // Gọi hàm getKhachHang để bắt đầu quá trình
        getKhachHang();
    });

</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Lấy tất cả các phần tử có id 'product-price'
        const priceElements = document.querySelectorAll('.product-price');

        // Hàm định dạng giá với dấu phân cách ngàn
        function formatNumber(number) {
            return number.toLocaleString('vi-VN');
        }

        // Duyệt qua tất cả các phần tử và định dạng giá
        priceElements.forEach(function(priceElement) {
            const price = parseFloat(priceElement.textContent.replace(/\./g, '').replace(' VND', ''));
            priceElement.textContent = formatNumber(price) + ' VND';
        });
    });
</script>



</body>
<div th:replace="~{client/fragmentsClient/footer :: footer}"></div>

</html>